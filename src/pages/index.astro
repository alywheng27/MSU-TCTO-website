---
import Layout from '../layouts/introloader.astro';
import Navbar from "../components/Navbar";
import ChancellorMessage from "../components/ChancellorMessage.astro";
import MainVideo from "../components/MainVideo.astro";
import FooterNav from "../components/FooterNav.astro";
import Footer from "../components/Footer.astro";
import CarouselMain from "../components/CarouselMain";
import heromain from "../components/HeroMainHeading";

import '../styles/css/global.css';
import '../styles/css/globalanimate.css';

const currentPath = Astro.url.pathname;

import { urlForImage } from '../api/api';
import { getYear } from '../js/date';
import { getWordMonth } from '../js/date';
import { getDay } from '../js/date';

import { get3LatestArticle } from '../api/api';
import { getLatestFeaturedArticle } from '../api/api';
import { get4UpcomingEvents } from '../api/api';
import { get3LatestGazette } from '../api/api';
import { get3LatestAnnualReport } from '../api/api';
import { sulimbanglatestshown } from '../api/api';
<<<<<<< HEAD
=======
import { testCalendarData } from '../api/api';
>>>>>>> upstream/master
import { getAllCalendarEvents } from '../api/api';

const threeLatestArticles = await get3LatestArticle();
const latestFeaturedArticle = await getLatestFeaturedArticle();
const fourUpcomingEvents = await get4UpcomingEvents();
const threeLatestGazette = await get3LatestGazette();
const latestsulimbang = await sulimbanglatestshown();
const threeLatestAnnualReport = await get3LatestAnnualReport();

<<<<<<< HEAD
=======
// Test calendar data
const testCalendar = await testCalendarData();
>>>>>>> upstream/master

// Get all calendar events for the complete dropdown
const allCalendarEvents = await getAllCalendarEvents();

// Debug logging
console.log('=== DEBUG: Upcoming Events Data ===');
console.log('fourUpcomingEvents:', fourUpcomingEvents);
console.log('fourUpcomingEvents length:', fourUpcomingEvents?.length);
console.log('fourUpcomingEvents type:', typeof fourUpcomingEvents);
<<<<<<< HEAD
=======
console.log('testCalendar:', testCalendar);
console.log('testCalendar length:', testCalendar?.length);
>>>>>>> upstream/master
if (fourUpcomingEvents && fourUpcomingEvents.length > 0) {
  console.log('First event:', fourUpcomingEvents[0]);
  console.log('First event date:', fourUpcomingEvents[0]?.date);
  console.log('First event title:', fourUpcomingEvents[0]?.title);
}
<<<<<<< HEAD
=======
if (testCalendar && testCalendar.length > 0) {
  console.log('Test calendar first event:', testCalendar[0]);
  console.log('Test calendar first event date:', testCalendar[0]?.date);
  console.log('Test calendar first event title:', testCalendar[0]?.title);
}
>>>>>>> upstream/master
---

<Layout title="MSU | Tawi-Tawi College of Technology and Oceanography">
    
            <main class="font-sans antialiased text-gray-800 dark:text-white dark:bg-gray-900 leading-normal">
        <!-- Enhanced Navbar -->
        <Navbar path={currentPath} client:visible />



        	<!-- Hero Section with Video Background -->
		<section class="relative bg-msu-main-color h-screen min-h-[700px] flex items-center overflow-hidden pt-[80px]">
			<!-- Video Background -->
			<div class="absolute inset-0 z-0 overflow-hidden">
				<video autoplay muted loop class="w-full h-full object-cover">
					<source src="/video/msucamp.mp4" type="video/mp4">
					<!-- Fallback image -->
					<img src="/images/development.png" alt="MSUTCTO" class="w-full h-full object-cover">
				</video>
				<div class="absolute inset-0 bg-black/40"></div>
			</div>
			
			<!-- Gradient overlay -->
			<div class="absolute inset-0 bg-gradient-to-t from-msu-deep-ocean/90 via-msu-main-color/50 to-transparent z-1"></div>
			
			  <!-- Content Container with Responsive Adjustments -->
    <div class="container mx-auto px-4 sm:px-6 z-10 relative">
        <div class="max-w-4xl mx-auto text-center px-4">
            <!-- University Seal with Responsive Sizing -->
            <div class="mb-6 md:mb-8 animate-fadeIn">
                <img 
                    src="/images/MSU Seal New (Official).png" 
                    alt="MSU Official Seal" 
                    class="h-20 sm:h-24 md:h-32 mx-auto transition-all duration-500 hover:scale-105"
                    loading="eager"
                >
            </div>
            
            <!-- Responsive Typography with Perfect Scaling -->
        <h1 class="font-philosopher text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-4 sm:mb-6 leading-tight tracking-tight animate-fadeInUp">
            <span class="block text-shadow-md">Mindanao State University</span>
            <span class="block font-bold mt-2 sm:mt-3 text-shadow">Tawi-Tawi College of Technology and Oceanography</span>
        </h1>

            
            <!-- Responsive Subheading -->
            <p class="font-philosopher text-lg sm:text-xl md:text-2xl text-white/90 mb-6 sm:mb-8 max-w-2xl mx-auto animate-fadeInUp delay-100 leading-relaxed">
                Creating Opportunities â€¢ Transforming Lives
            </p>
        
            <!-- Responsive Call-to-Action Buttons -->
            <div class="flex flex-col sm:flex-row justify-center gap-3 sm:gap-4 animate-fadeInUp delay-200">
                <a 
                    href="#publications" 
                    class="bg-msu-main-color hover:bg-msu-deep-ocean text-white font-medium py-2 sm:py-3 px-4 sm:px-6 md:px-8 rounded-full transition-all duration-300 inline-flex items-center justify-center hover:shadow-lg hover:-translate-y-0.5 transform btn-hover-effect"
                >
                    <span class="text-sm sm:text-base">University Publications</span>
                    <svg class="w-4 h-4 sm:w-5 sm:h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                    </svg>
                </a>
                <!-- <a 
                    href="#service" 
                    class="bg-transparent border-2 border-white hover:bg-white/20 text-white font-medium py-2 sm:py-3 px-4 sm:px-6 md:px-8 rounded-full transition-all duration-300 inline-flex items-center justify-center hover:shadow-lg hover:-translate-y-0.5 transform btn-hover-effect"
                >
                    <span class="text-sm sm:text-base">Service Evaluation</span>
                    <svg class="w-4 h-4 sm:w-5 sm:h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
                    </svg>
                </a> -->
            </div>
        </div>
    </div>
    
   <!-- Enhanced Scrolling Indicator -->
<div class="absolute bottom-1 sm:bottom-6 left-1/2 transform -translate-x-1/2 z-20 animate-bounce">
    <a href="#featured-news" 
       class="block p-2 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50 rounded-full transition-all"
       aria-label="Scroll down">
        <svg class="w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 text-white/90 hover:text-white transition-colors" 
             fill="none" 
             stroke="currentColor" 
             stroke-width="2" 
             viewBox="0 0 24 24" 
             xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" 
                  stroke-linejoin="round" 
                  d="M19 14l-7 7m0 0l-7-7m7 7V3">
            </path>
        </svg>
    </a>
</div>
    <!-- Mobile-specific optimizations -->
    <style>
        @media (max-width: 640px) {
            /* On mobile, consider using a static image if performance is critical */
            video {
                display: none;
            }
            .absolute.inset-0.z-0 {
                background-image: url('/images/cof/cof.jpg');
                background-size: cover;
                background-position: center;
            }
            
            /* Adjust overlay for mobile */
            .absolute.inset-0.z-0::after {
                content: '';
                position: absolute;
                inset: 0;
                background: linear-gradient(to bottom, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.7) 100%);
            }
            
            /* Increase tap targets for mobile */
            .btn-hover-effect {
                min-height: 44px; /* Recommended minimum touch target size */
            }
        }
        
        /* Smooth animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fadeInUp {
            animation: fadeInUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .animate-bounce {
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0) translateX(-50%);
            }
            40% {
                transform: translateY(-20px) translateX(-50%);
            }
            60% {
                transform: translateY(-10px) translateX(-50%);
            }
        }
    </style>
</section>
        
        <!-- Video Section at Top with Gradient Design -->
        <!-- <section class="relative w-full bg-gradient-to-b from-[#61063B] to-[#1e3a8a]">
            <div class="absolute inset-0 bg-black/30 z-10"></div>
            <div class="container mx-auto px-4 xl:px-32 py-16 relative z-20">
                <MainVideo />
            </div>
        </section> -->

   <!-- Centered Pop-out Advertisement Carousel -->
<div id="adOverlay" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 hidden">
  <div class="relative w-full max-w-7xl mx-4 bg-white rounded-xl shadow-2xl overflow-hidden transition-all duration-300 transform">
    <!-- Professional close button with tooltip -->
    <div class="absolute top-4 right-4 z-10 group">
      <button 
        aria-label="Close advertisement"
        class="bg-msu-deep-ocean text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-black/80 transition-all duration-200 transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-white/50"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
      <div class="absolute right-12 top-1/2 -translate-y-1/2 bg-gray-900 text-white text-sm px-3 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap">
        Click to close this ad
      </div>
    </div>
    
    <!-- Instruction text -->
    <div class="absolute bottom-2 right-4 z-10 bg-black/70  text-white text-xs px-3 py-1 rounded-full">
     To close this advertisement, just click the 'X' icon. Tap or click the photo to learn more.
    </div>
    
    <CarouselMain client:visible />
  </div>
</div>


        <!-- Featured News Section -->
        <section class="bg-white dark:bg-gray-900 py-16">
            <div class="container mx-auto px-4 xl:px-32">
                <div class="flex flex-col lg:flex-row gap-8">
                    <!-- Featured Article -->
                    <div class="lg:w-2/3 relative group">
                        <div class="overflow-hidden rounded-lg shadow-lg">
                            <img 
                                src={urlForImage(latestFeaturedArticle.mainImage.asset.url).url()} 
                                alt={latestFeaturedArticle.title} 
                                class="w-full h-[500px] object-cover object-center transition-transform duration-500 group-hover:scale-105"
                            />
                            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-8">
                                <div class="max-w-2xl">
                                    <a href={`/${latestFeaturedArticle.slug.current}`}>
                                        <h3 class="text-2xl md:text-3xl font-bold text-white mb-2 hover:text-[#61063B] transition-colors">
                                            {latestFeaturedArticle.title}
                                        </h3>
                                    </a>
                                    <p class="text-gray-200 line-clamp-3">
                                        {latestFeaturedArticle.body[0].children[0].text}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Latest Articles -->
                    <div class="lg:w-1/3 space-y-6">
                        <h4 class="text-xl font-semibold border-b pb-2 text-msu-main-color dark:text-white dark:text-outline">Latest News</h4>
                        {threeLatestArticles.map((article) => (
                            <div class="flex gap-4 group">
                                <div class="flex-shrink-0 w-24 h-24 overflow-hidden rounded">
                                    <img 
                                        src={urlForImage(article.mainImage.asset.url).url()} 
                                        alt={article.title}
                                        class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
                                    />
                                </div>
                                <div>
                                    <a href={`/${article.slug.current}`}>
                                        <h5 class="font-medium text-gray-900 dark:text-gray-100 group-hover:text-msu-maroon dark:group-hover:text-[#61063B] transition-colors line-clamp-2">
                                            {article.title}
                                        </h5>
                                    </a>
                                    <p class="text-sm text-gray-600 dark:text-gray-300 mt-1 line-clamp-3">
                                        {article.body[0].children[0].text}
                                    </p>
                                </div>
                            </div>
                        ))}
                        <div class="pt-4">
                            <a href="/publications/articles" class="text-msu-maroon dark:text-white font-medium hover:underline flex items-center">
                                View all news
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- Enhanced Interactive Enrollment Process Section -->
        <!-- <section class="bg-gradient-to-br from-gray-50 via-white to-blue-50 py-24 overflow-hidden">
            <div class="container mx-auto px-4 xl:px-32"> -->
                <!-- Enhanced Header with Animation -->
                <!-- <div class="text-center mb-20">
                    <div class="inline-flex items-center gap-3 bg-msu-main-color/10 px-6 py-3 rounded-full mb-6 animate-fade-in">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-msu-main-color" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
                        </svg>
                        <span class="text-msu-main-color font-semibold">Academic Enrollment</span>
                    </div>
                    <h2 class="text-5xl font-bold text-msu-deep-ocean mb-6 animate-slide-up">
                        Enrollment <span class="text-transparent bg-clip-text bg-gradient-to-r from-msu-main-color to-msu-gold">Process</span>
                    </h2>
                    <p class="text-xl text-gray-600 mb-8 max-w-3xl mx-auto animate-slide-up delay-100">
                        Your journey to academic excellence starts here. Follow our comprehensive step-by-step guide designed for all colleges and programs.
                    </p>
                    <div class="flex items-center justify-center gap-3 animate-slide-up delay-200">
                        <div class="w-20 h-1.5 bg-gradient-to-r from-msu-gold to-msu-main-color rounded-full"></div>
                        <div class="w-3 h-3 bg-msu-main-color rounded-full animate-pulse"></div>
                        <div class="w-20 h-1.5 bg-gradient-to-r from-msu-main-color to-msu-gold rounded-full"></div>
                    </div>
                </div> -->

                <!-- Interactive Progress Tracker -->
                <!-- <div class="mb-16">
                    <div class="flex justify-center mb-8">
                        <div class="bg-white/80 backdrop-blur-sm rounded-full px-8 py-4 shadow-lg border border-white/20">
                            <div class="flex items-center gap-6">
                                <span class="text-sm font-medium text-gray-600">Progress:</span>
                                <div class="flex items-center gap-2">
                                    <div class="w-24 h-2 bg-gray-200 rounded-full overflow-hidden">
                                        <div id="enrollment-progress" class="h-full bg-gradient-to-r from-msu-main-color to-msu-gold rounded-full transition-all duration-1000 ease-out" style="width: 0%"></div>
                                    </div>
                                    <span id="progress-text" class="text-sm font-bold text-msu-main-color">0/8</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->

                <!-- World-Class Flowchart Design -->
                <!-- <div class="relative max-w-7xl mx-auto">
                    Continuous Lifeline SVG Overlay
                    <div class="absolute inset-0 pointer-events-none z-10">
                        <svg class="w-full h-full" viewBox="0 0 1000 600">
                            <defs> -->
                                <!-- Main Lifeline Gradient -->
                                <!-- <linearGradient id="lifelineGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#1e40af;stop-opacity:0.8"/>
                                    <stop offset="15%" style="stop-color:#3b82f6;stop-opacity:0.7"/>
                                    <stop offset="30%" style="stop-color:#f59e0b;stop-opacity:0.6"/>
                                    <stop offset="45%" style="stop-color:#fbbf24;stop-opacity:0.7"/>
                                    <stop offset="55%" style="stop-color:#8b5cf6;stop-opacity:0.8"/>
                                    <stop offset="70%" style="stop-color:#06b6d4;stop-opacity:0.7"/>
                                    <stop offset="85%" style="stop-color:#f97316;stop-opacity:0.8"/>
                                    <stop offset="100%" style="stop-color:#10b981;stop-opacity:0.9"/>
                                </linearGradient>
                                 -->
                                <!-- Lifeline Tube Background -->
                                <!-- <linearGradient id="lifelineTube" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#1f2937;stop-opacity:0.3"/>
                                    <stop offset="50%" style="stop-color:#4b5563;stop-opacity:0.2"/>
                                    <stop offset="100%" style="stop-color:#6b7280;stop-opacity:0.4"/>
                                </linearGradient>
                                 -->
                                <!-- Dynamic Bubble Gradients -->
                                <!-- <radialGradient id="lifelineBubble1" cx="25%" cy="25%" r="75%">
                                    <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.95"/>
                                    <stop offset="30%" style="stop-color:#3b82f6;stop-opacity:0.8"/>
                                    <stop offset="100%" style="stop-color:#1e40af;stop-opacity:0.5"/>
                                </radialGradient>
                                <radialGradient id="lifelineBubble2" cx="30%" cy="30%" r="70%">
                                    <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.9"/>
                                    <stop offset="35%" style="stop-color:#f59e0b;stop-opacity:0.75"/>
                                    <stop offset="100%" style="stop-color:#d97706;stop-opacity:0.6"/>
                                </radialGradient>
                                <radialGradient id="lifelineBubble3" cx="35%" cy="35%" r="65%">
                                    <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.92"/>
                                    <stop offset="30%" style="stop-color:#8b5cf6;stop-opacity:0.8"/>
                                    <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:0.55"/>
                                </radialGradient>
                                <radialGradient id="lifelineBubble4" cx="25%" cy="25%" r="75%">
                                    <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.94"/>
                                    <stop offset="35%" style="stop-color:#06b6d4;stop-opacity:0.77"/>
                                    <stop offset="100%" style="stop-color:#0891b2;stop-opacity:0.58"/>
                                </radialGradient>
                                <radialGradient id="lifelineBubble5" cx="30%" cy="30%" r="70%">
                                    <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.96"/>
                                    <stop offset="32%" style="stop-color:#f97316;stop-opacity:0.82"/>
                                    <stop offset="100%" style="stop-color:#ea580c;stop-opacity:0.6"/>
                                </radialGradient>
                                <radialGradient id="lifelineBubble6" cx="28%" cy="28%" r="72%">
                                    <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.98"/>
                                    <stop offset="30%" style="stop-color:#10b981;stop-opacity:0.85"/>
                                    <stop offset="100%" style="stop-color:#059669;stop-opacity:0.65"/>
                                </radialGradient>
                            </defs>
                             -->
                            <!-- Main Lifeline Tube Background -->
                            <!-- <path d="M130 120 L350 120 L570 120 L800 250 L650 360 L500 360 L350 360 L200 360" 
                                  stroke="url(#lifelineTube)" stroke-width="16" fill="none" opacity="0.4"/> -->
                            
                            <!-- Continuous Lifeline Path -->
                            <!-- <path id="continuousLifeline" 
                                  d="M130 120 Q240 120 350 120 Q460 120 570 120 Q650 120 750 160 Q820 200 800 250 Q780 300 720 330 Q660 360 580 360 Q490 360 400 360 Q310 360 220 360" 
                                  stroke="url(#lifelineGradient)" stroke-width="8" fill="none" opacity="0.7"/> -->
                            
                            <!-- Continuous Flowing Bubbles -->
                            <!-- Primary Flow -->
                            <!-- <circle class="lifeline-bubble" r="4" fill="url(#lifelineBubble1)" opacity="0">
                                <animateMotion dur="18s" repeatCount="indefinite" begin="0s">
                                    <mpath href="#continuousLifeline"/>
                                </animateMotion>
                                <animate attributeName="r" values="2;6;4;8;3;7;2" dur="18s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0;0.9;1;0.8;1;0.7;0" dur="18s" repeatCount="indefinite"/>
                            </circle> -->
                            
                            <!-- Secondary Flow -->
                            <!-- <circle class="lifeline-bubble" r="3.5" fill="url(#lifelineBubble2)" opacity="0">
                                <animateMotion dur="20s" repeatCount="indefinite" begin="3s">
                                    <mpath href="#continuousLifeline"/>
                                </animateMotion>
                                <animate attributeName="r" values="1.8;5.5;3.5;7.5;2.8;6.2;1.8" dur="20s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0;0.8;0.95;0.75;0.9;0.6;0" dur="20s" repeatCount="indefinite"/>
                            </circle> -->
                            
                            <!-- Tertiary Flow -->
                            <!-- <circle class="lifeline-bubble" r="4.5" fill="url(#lifelineBubble3)" opacity="0">
                                <animateMotion dur="16s" repeatCount="indefinite" begin="6s">
                                    <mpath href="#continuousLifeline"/>
                                </animateMotion>
                                <animate attributeName="r" values="2.5;7;4.5;9;3.8;7.8;2.5" dur="16s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0;0.85;1;0.7;0.95;0.65;0" dur="16s" repeatCount="indefinite"/>
                            </circle>
                             -->
                            <!-- Quaternary Flow -->
                            <!-- <circle class="lifeline-bubble" r="3.2" fill="url(#lifelineBubble4)" opacity="0">
                                <animateMotion dur="22s" repeatCount="indefinite" begin="9s">
                                    <mpath href="#continuousLifeline"/>
                                </animateMotion>
                                <animate attributeName="r" values="1.5;5.8;3.2;8.2;2.5;6.5;1.5" dur="22s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0;0.75;0.9;0.8;0.85;0.55;0" dur="22s" repeatCount="indefinite"/>
                            </circle> -->
                            
                            <!-- Quinary Flow -->
                            <!-- <circle class="lifeline-bubble" r="3.8" fill="url(#lifelineBubble5)" opacity="0">
                                <animateMotion dur="19s" repeatCount="indefinite" begin="12s">
                                    <mpath href="#continuousLifeline"/>
                                </animateMotion>
                                <animate attributeName="r" values="2.2;6.5;3.8;8.8;3.2;7.2;2.2" dur="19s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0;0.82;0.98;0.72;0.88;0.62;0" dur="19s" repeatCount="indefinite"/>
                            </circle> -->
                            
                            <!-- Final Flow -->
                            <!-- <circle class="lifeline-bubble" r="4.2" fill="url(#lifelineBubble6)" opacity="0">
                                <animateMotion dur="17s" repeatCount="indefinite" begin="15s">
                                    <mpath href="#continuousLifeline"/>
                                </animateMotion>
                                <animate attributeName="r" values="2.8;7.2;4.2;9.2;3.5;7.5;2.8" dur="17s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0;0.88;1;0.78;0.92;0.68;0" dur="17s" repeatCount="indefinite"/>
                            </circle>
                             -->
                            <!-- Progress Indicator Bubble (Larger, follows current step) -->
                            <!-- <circle class="progress-bubble" r="6" fill="url(#lifelineBubble1)" opacity="0.8">
                                <animateMotion dur="25s" repeatCount="indefinite" begin="0s">
                                    <mpath href="#continuousLifeline"/>
                                </animateMotion>
                                <animate attributeName="r" values="5;10;6;12;5" dur="25s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.6;1;0.8;1;0.6" dur="25s" repeatCount="indefinite"/>
                            </circle>
                        </svg>
                    </div> -->
                    <!-- Top Row - Student Journey Start -->
                    <!-- <div class="grid grid-cols-1 lg:grid-cols-3 gap-16 mb-20"> -->
                        
                        <!-- Step 1: Student Classification -->
                        <!-- <div class="enrollment-step group relative text-center" data-step="1">
                            <div class="relative z-10"> -->
                                <!-- Icon Container -->
                                <!-- <div class="w-32 h-32 mx-auto mb-6 bg-gradient-to-br from-msu-main-color to-msu-deep-ocean rounded-full flex items-center justify-center shadow-2xl group-hover:scale-110 transition-all duration-500 relative"> -->
                                    <!-- Animated Ring -->
                                    <!-- <div class="absolute inset-0 rounded-full border-4 border-msu-gold/30 animate-pulse"></div>
                                    <div class="absolute inset-2 rounded-full border-2 border-white/20"></div> -->
                                    
                                    <!-- Walking Person Icon -->
                                    <!-- <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"/>
                                    </svg>
                                </div> -->
                                
                                <!-- Title -->
                                <!-- <h3 class="text-2xl font-bold text-msu-deep-ocean mb-4 group-hover:text-msu-main-color transition-colors">New Student<br/>Shiftee<br/>Transferee</h3> -->
                                
                                <!-- Details List -->
                                <!-- <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-gray-100 group-hover:shadow-xl transition-all duration-500">
                                    <ul class="text-sm text-gray-600 space-y-2 text-left">
                                        <li class="flex items-center"><span class="w-2 h-2 bg-msu-main-color rounded-full mr-3 flex-shrink-0"></span>New Student (Fresh Graduate)</li>
                                        <li class="flex items-center"><span class="w-2 h-2 bg-msu-main-color rounded-full mr-3 flex-shrink-0"></span>Shiftee (Change Program)</li>
                                        <li class="flex items-center"><span class="w-2 h-2 bg-msu-main-color rounded-full mr-3 flex-shrink-0"></span>Transferee (From Other School)</li>
                                    </ul>
                                </div>
                            </div>
                            

                        </div> -->

                        <!-- Step 2: Document Requirements -->
                        <!-- <div class="enrollment-step group relative text-center" data-step="2">
                            <div class="relative z-10"> -->
                                <!-- Icon Container -->
                                <!-- <div class="w-32 h-32 mx-auto mb-6 bg-gradient-to-br from-msu-gold to-yellow-600 rounded-full flex items-center justify-center shadow-2xl group-hover:scale-110 transition-all duration-500 relative">
                                    <div class="absolute inset-0 rounded-full border-4 border-msu-main-color/30 animate-pulse"></div>
                                    <div class="absolute inset-2 rounded-full border-2 border-white/20"></div> -->
                                    
                                    <!-- University Building Icon -->
                                    <!-- <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                                    </svg>
                                </div> -->
                                
                                <!-- <h3 class="text-xl font-bold text-msu-deep-ocean mb-4 group-hover:text-msu-gold transition-colors">Requirements</h3>
                                
                                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-gray-100 group-hover:shadow-xl transition-all duration-500">
                                    <ul class="text-sm text-gray-600 space-y-2 text-left">
                                        <li class="flex items-center"><span class="w-2 h-2 bg-msu-gold rounded-full mr-3 flex-shrink-0"></span>SASE Score</li>
                                        <li class="flex items-center"><span class="w-2 h-2 bg-msu-gold rounded-full mr-3 flex-shrink-0"></span>Report Card</li>
                                        <li class="flex items-center"><span class="w-2 h-2 bg-msu-gold rounded-full mr-3 flex-shrink-0"></span>Admission Form</li>
                                        <li class="flex items-center"><span class="w-2 h-2 bg-msu-gold rounded-full mr-3 flex-shrink-0"></span>2x2 Picture</li>
                                        <li class="flex items-center"><span class="w-2 h-2 bg-msu-gold rounded-full mr-3 flex-shrink-0"></span>Medical Certificate</li>
                                        <li class="flex items-center"><span class="w-2 h-2 bg-msu-gold rounded-full mr-3 flex-shrink-0"></span>Good Moral Certificate</li>
                                        <li class="flex items-center"><span class="w-2 h-2 bg-msu-gold rounded-full mr-3 flex-shrink-0"></span>Certificate of Indigent <span class="text-xs text-gray-500 ml-1">(for indigent students)</span></li>
                                        <li class="flex items-center"><span class="w-2 h-2 bg-msu-gold rounded-full mr-3 flex-shrink-0"></span>Grade of Previous Semester <span class="text-xs text-gray-500 ml-1">(for shiftee/transferee)</span></li>
                                    </ul>
                                </div>
                            </div>

                        </div> -->

                        <!-- Step 3: College Dean Approval -->
                        <!-- <div class="enrollment-step group relative text-center" data-step="3">
                            <div class="relative z-10"> -->
                                <!-- Icon Container -->
                                <!-- <div class="w-32 h-32 mx-auto mb-6 bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-full flex items-center justify-center shadow-2xl group-hover:scale-110 transition-all duration-500 relative">
                                    <div class="absolute inset-0 rounded-full border-4 border-emerald-400/30 animate-pulse"></div>
                                    <div class="absolute inset-2 rounded-full border-2 border-white/20"></div> -->
                                    
                                    <!-- Dean/Admin Icon -->
                                    <!-- <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                    </svg>
                                </div> -->
                                
                                <!-- <h3 class="text-xl font-bold text-msu-deep-ocean mb-2 group-hover:text-indigo-600 transition-colors">College Dean's Office</h3>
                                <p class="text-sm text-gray-500 italic mb-4">for approval</p>
                                
                                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-gray-100 group-hover:shadow-xl transition-all duration-500">
                                    <div class="grid grid-cols-2 gap-2 text-xs text-gray-600">
                                        <div class="flex items-center"><span class="w-1.5 h-1.5 bg-indigo-500 rounded-full mr-2"></span>IICT</div>
                                        <div class="flex items-center"><span class="w-1.5 h-1.5 bg-indigo-500 rounded-full mr-2"></span>CAS</div>
                                        <div class="flex items-center"><span class="w-1.5 h-1.5 bg-indigo-500 rounded-full mr-2"></span>COED</div>
                                        <div class="flex items-center"><span class="w-1.5 h-1.5 bg-indigo-500 rounded-full mr-2"></span>COF</div>
                                        <div class="flex items-center"><span class="w-1.5 h-1.5 bg-indigo-500 rounded-full mr-2"></span>IOES</div>
                                        <div class="flex items-center"><span class="w-1.5 h-1.5 bg-indigo-500 rounded-full mr-2"></span>CIAS</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->



                    <!-- Bottom Row - Process Completion -->
                    <!-- <div class="grid grid-cols-1 lg:grid-cols-4 gap-12"> -->
                        
                        <!-- Step 4: College Chairperson -->
                        <!-- <div class="enrollment-step group relative text-center" data-step="4">
                            <div class="relative z-10">
                                <div class="w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center shadow-xl group-hover:scale-110 transition-all duration-500">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                                    </svg>
                                </div>
                                <h4 class="text-lg font-bold text-msu-deep-ocean mb-2">College Chairperson</h4>
                                <div class="text-sm text-gray-600">
                                    <p class="mb-2">- Advising</p>
                                    <p class="text-xs text-gray-500">Choice of Tracks<br/>BS IT / BS CA</p>
                                </div>
                            </div>

                        </div> -->

                        <!-- Step 5: Encoder -->
                        <!-- <div class="enrollment-step group relative text-center" data-step="5">
                            <div class="relative z-10">
                                <div class="w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-cyan-500 to-cyan-700 rounded-full flex items-center justify-center shadow-xl group-hover:scale-110 transition-all duration-500">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2" />
                                    </svg>
                                </div>
                                <h4 class="text-lg font-bold text-msu-deep-ocean mb-2">Encoder</h4>
                                <div class="text-sm text-gray-600 space-y-1">
                                    <p>- Subject & Schedule</p>
                                    <p>- Room Assignment</p>
                                    <p>- Release of COR</p>
                                </div>
                            </div>

                        </div> -->

                        <!-- Step 6: ITEA Fee -->
                        <!-- <div class="enrollment-step group relative text-center" data-step="6">
                            <div class="relative z-10">
                                <div class="w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-orange-500 to-orange-700 rounded-full flex items-center justify-center shadow-xl group-hover:scale-110 transition-all duration-500">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
                                    </svg>
                                </div>
                                <h4 class="text-lg font-bold text-msu-deep-ocean mb-2">College Student Organization (ITEA)</h4>
                                <div class="text-sm text-gray-600">
                                    <p class="font-semibold">- ITEA Fee</p>
                                </div>
                            </div>

                        </div> -->

                        <!-- Step 7: Registrar's Office -->
                        <!-- <div class="enrollment-step group relative text-center" data-step="7">
                            <div class="relative z-10">
                                <div class="w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-full flex items-center justify-center shadow-xl group-hover:scale-110 transition-all duration-500 relative">
                                    <div class="absolute inset-0 rounded-full border-2 border-emerald-300/40 animate-ping"></div>
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                                    </svg>
                                </div>
                                <h4 class="text-lg font-bold text-msu-deep-ocean mb-2">Registrar's Office</h4>
                                <div class="text-sm text-gray-600">
                                    <p class="font-semibold">- For Official Enrollment</p>
                                </div>
                            </div>
                        </div>
                    </div> -->

                    <!-- Floating Progress Indicator -->
                    <!-- <div class="fixed bottom-20 right-6 bg-white/90 backdrop-blur-sm rounded-full px-4 py-2 shadow-lg border border-gray-200 z-30">
                        <div class="flex items-center gap-3">
                            <span class="text-sm font-medium text-gray-600">Step</span>
                            <div class="flex items-center gap-1">
                                <span id="current-step-indicator" class="text-lg font-bold text-msu-main-color">1</span>
                                <span class="text-gray-400">/</span>
                                <span class="text-gray-600">7</span>
                            </div>
                            <div class="w-12 h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div id="floating-progress" class="h-full bg-gradient-to-r from-msu-main-color to-emerald-500 rounded-full transition-all duration-500" style="width: 14.3%"></div>
                            </div>
                        </div>
                    </div>
                </div> -->

<!--               
                        </div>
                    </div>
                </div>
            </div>
        </section> -->
        <!-- Upcoming Events Section -->
        <section class="bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-gray-800 py-20">
            <div class="container mx-auto px-4 xl:px-32">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-msu-deep-ocean dark:text-white dark:text-outline mb-4">Featured Calendar Events</h2>
                    <p class="text-lg text-gray-600 dark:text-gray-300 mb-4">All events from the academic calendar</p>
                    <div class="flex items-center justify-center gap-2">
                        <div class="w-16 h-1 bg-[#61063B]"></div>
                        <!-- <div class="w-4 h-1 bg-msu-maroon"></div>
                        <div class="w-16 h-1 bg-msu-gold"></div> -->
                    </div>
                </div>
                
                <!-- Initial 4 Events Display -->
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
<<<<<<< HEAD
                    {fourUpcomingEvents && fourUpcomingEvents.length > 0 ? (
                        fourUpcomingEvents.slice(0, 4).map((calendar) => {
=======
                    {(fourUpcomingEvents && fourUpcomingEvents.length > 0) || (testCalendar && testCalendar.length > 0) ? (
                        (fourUpcomingEvents && fourUpcomingEvents.length > 0 ? fourUpcomingEvents : testCalendar).slice(0, 4).map((calendar) => {
>>>>>>> upstream/master
                            console.log('Processing calendar event:', calendar);
                            
                            let displayDate = calendar.date;
                            if (typeof calendar.date === 'object' && calendar.date._type === 'datetime') {
                                displayDate = calendar.date.utc;
                            }
                            
                            const bgColor = calendar?.holiday?.holiday === 'Academic Holiday' 
                                ? 'bg-gradient-to-br from-msu-shallow-ocean to-msu-deep-ocean' 
                                : 'bg-gradient-to-br from-msu-maroon to-msu-dark-pink';
                            
                            return (
                                <div class={`${bgColor} rounded-2xl shadow-xl overflow-hidden transform transition-all duration-300 hover:scale-105 hover:shadow-2xl group`}>
                                    <div class="p-8 relative">
                                        <div class="absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -mr-12 -mt-12"></div>
                                        <!-- Featured Badge -->
                                        <div class="absolute top-2 left-4">
                                            <span class="bg-gradient-to-r from-msu-gold to-yellow-400 text-white text-xs px-3 py-1 rounded-full font-semibold shadow-lg">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                                </svg>
                                                Featured
                                            </span>
                                        </div>
                                        <div class="mb-6 border-b border-white/20 pb-4">
                                            <p class="text-lg uppercase tracking-wider text-msu-gold font-medium">{getWordMonth(displayDate)}</p>
                                            <p class="text-5xl font-bold text-white mt-1">{getDay(displayDate)}</p>
                                            <p class="text-sm text-white/80 mt-1">{getYear(displayDate)}</p>
                                        </div>
                                        <div>
                                            <h4 class="text-2xl font-bold text-white mb-3 group-hover:text-msu-gold transition-colors">
                                                {calendar.title}
                                            </h4>
                                            <p class="text-gray-200/90 line-clamp-3 text-sm leading-relaxed">
                                                {calendar.body?.[0]?.children?.[0]?.text || 'No description available'}
                                            </p>
                                        </div>
                                        <div class="absolute bottom-4 right-4">
                                            <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center group-hover:bg-msu-gold transition-colors">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            );
                        })
                    ) : (
                        <div class="col-span-4 text-center py-12 bg-white/50 dark:bg-gray-700/50 backdrop-blur-sm rounded-2xl shadow-lg">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-gray-400 dark:text-gray-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            <p class="text-2xl font-semibold text-gray-700 dark:text-gray-200">No upcoming events at this time</p>
                            <p class="text-gray-500 dark:text-gray-400 mt-2">Check back later for new events</p>
                        </div>
                    )}
                </div>
                
                <!-- Stunning Dropdown for All Events -->
                {(allCalendarEvents && allCalendarEvents.length > 4) ? (
                    <div class="text-center">
                        <!-- Backdrop Overlay -->
                        <div id="eventsBackdrop" class="fixed inset-0 bg-black/50 backdrop-blur-sm opacity-0 pointer-events-none transition-opacity duration-300 z-[9998]"></div>
                        
                        <div class="relative inline-block">
                            <button 
                                id="eventsDropdownBtn"
                                class="group relative inline-flex items-center px-8 py-4 bg-gradient-to-r from-msu-deep-ocean to-msu-deep-ocean dark:from-[#61063B] dark:to-[#61063B] dark:btn-outline text-white rounded-full font-semibold hover:from-msu-main-color hover:to-msu-deep-ocean dark:hover:from-[#61063B] dark:hover:to-[#03045e] transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg gap-3 overflow-hidden"
                            >
                                <span class="relative z-10">View Complete Calendar</span>
                                <svg id="dropdownArrow" class="relative z-10 h-5 w-5 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                </svg>
                                <div class="absolute inset-0 bg-gradient-to-r from-msu-main-color to-msu-deep-ocean opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                            </button>
                            
                            <!-- Dropdown Content -->
                            <div 
                                id="eventsDropdown"
                                class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[95vw] max-w-7xl max-h-[90vh] bg-white/95 dark:bg-gray-800/95 backdrop-blur-md rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-600/50 opacity-0 pointer-events-none transition-all duration-500 scale-95 z-[9999]"
                            >
                                <div class="p-8 relative">
                                    <!-- Close Button -->
                                    <button 
                                        id="closeEventsModal"
                                        class="absolute top-4 right-4 z-10 group bg-msu-deep-ocean dark:bg-[#61063B] dark:btn-outline text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-black/80 dark:hover:bg-[#03045e] transition-all duration-200 transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-white/50 dark:focus:ring-[#61063B]/50"
                                        aria-label="Close calendar"
                                    >
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                        </svg>
                                    </button>
                                    
                                    <div class="text-center mb-8">
                                        <div class="flex items-center justify-center gap-3 mb-4">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-msu-deep-ocean dark:text-[#61063B]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                            </svg>
                                            <h3 class="text-4xl font-bold text-msu-deep-ocean dark:text-white dark:text-outline">Complete Event Calendar</h3>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-msu-deep-ocean dark:text-[#61063B]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                            </svg>
                                        </div>
                                        <div class="w-32 h-1.5 bg-gradient-to-r from-[#61063B] via-msu-maroon to-[#61063B] mx-auto rounded-full mb-4"></div>
                                        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">Explore all calendar events and important dates at MSU-TCTO</p>
                                    </div>
                                    
                                    <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 max-h-[60vh] overflow-y-auto custom-scrollbar">
                                        {allCalendarEvents.map((calendar, index) => {
                                            let displayDate = calendar.date;
                                            if (typeof calendar.date === 'object' && calendar.date._type === 'datetime') {
                                                displayDate = calendar.date.utc;
                                            }
                                            
                                            const bgColor = calendar?.holiday?.holiday === 'Academic Holiday' 
                                                ? 'bg-gradient-to-br from-msu-shallow-ocean to-msu-deep-ocean' 
                                                : 'bg-gradient-to-br from-msu-maroon to-msu-dark-pink';
                                            
                                            return (
                                                <div class={`${bgColor} rounded-xl shadow-lg overflow-hidden transform transition-all duration-300 hover:scale-105 hover:shadow-xl group ${index < 4 ? 'ring-2 ring-msu-gold/50' : ''}`}>
                                                    <div class="p-6 relative">
                                                        <div class="absolute top-0 right-0 w-16 h-16 bg-white/10 rounded-full -mr-8 -mt-8"></div>
                                                        
                                                        <!-- Enhanced Date Display -->
                                                        <div class="mb-4 border-b border-white/20 pb-4">
                                                            <div class="flex items-center justify-between mb-2">
                                                                <p class="text-sm uppercase tracking-wider text-msu-gold font-semibold">{getWordMonth(displayDate)}</p>
                                                                <div class="flex items-center gap-1">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-msu-gold" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                                                    </svg>
                                                                    <span class="text-xs text-white/80 font-medium">Event</span>
                                                                </div>
                                                            </div>
                                                            <p class="text-4xl font-bold text-white mt-1 leading-none">{getDay(displayDate)}</p>
                                                            <p class="text-xs text-white/70 mt-1">{getYear(displayDate)}</p>
                                                        </div>
                                                        
                                                        <!-- Enhanced Content -->
                                                        <div>
                                                            <h4 class="text-lg font-bold text-white mb-3 group-hover:text-msu-gold transition-colors line-clamp-2 leading-tight">
                                                                {calendar.title}
                                                            </h4>
                                                            <p class="text-gray-200/90 line-clamp-3 text-sm leading-relaxed">
                                                                {calendar.body?.[0]?.children?.[0]?.text || 'No description available'}
                                                            </p>
                                                        </div>
                                                        
                                                        <!-- Enhanced Featured Badge -->
                                                        {index < 4 && (
                                                            <div class="absolute top-0  left-3">
                                                                <span class="bg-gradient-to-r from-msu-gold to-yellow-400 text-white text-xs px-3 py-1 rounded-full font-semibold shadow-lg">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                                                    </svg>
                                                                    Featured
                                                                </span>
                                                            </div>
                                                        )}
                                                        
                                                        <!-- Event Type Indicator -->
                                                        <div class="absolute bottom-3 right-3">
                                                            <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center group-hover:bg-msu-gold transition-colors">
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                                                </svg>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                ) : (
                    <div class="text-center">
                        <a
                            href="/events"
                            class="inline-flex items-center px-8 py-4 bg-msu-deep-ocean dark:bg-[#61063B] dark:btn-outline text-white rounded-full font-semibold hover:bg-msu-maroon dark:hover:bg-[#03045e] transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg gap-2"
                        >
                            View All Events
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                            </svg>
                        </a>
                    </div>
                )}
            </div>
        </section>

        <!-- Campus Life Section -->
        <section class="relative bg-gray-50 dark:bg-gray-800 py-20 overflow-hidden">
            <div class="absolute inset-0 bg-[url('/images/campus-life-bg.jpg')] bg-cover bg-center opacity-10"></div>
            <div class="container mx-auto px-4 xl:px-32 relative">
                <div class="flex flex-col lg:flex-row items-center gap-12">
                    <div class="lg:w-1/3">
                        <h2 class="text-3xl font-bold text-msu-main-color dark:text-white dark:text-outline mb-6">Experience MSU-TCTO's Campus Life</h2>
                        <p class="text-gray-700 dark:text-gray-300 mb-8">
                            As an innovative research university, MSU-TCTO offers a vibrant campus life at the heart of the Sulu Archipelago. 
                            Experience diverse cultures, engage in the rich heritage of Tawi-Tawians, and participate in community engagements. 
                            Your campus experiences will change your mind and enrich your heart forever.
                        </p>
                        <a 
                            href="../../about/campus" 
                            class="inline-block px-8 py-3 bg-gradient-to-r from-msu-deep-ocean to-msu-deep-ocean bg-msu-main-color hover:to-msu-deep-ocean dark:hover:from-[#61063B] dark:hover:to-[#03045e] dark:btn-outline text-white rounded-full font-medium  transition-colors "
                        >
                            Explore The Campus
                        </a>
                    </div>
                    
                    <div class="lg:w-2/3 grid md:grid-cols-3 gap-6">
                        <!-- Academic Programs Card -->
                        <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105">
                            <img src="/images/student_center/image1.png" alt="Academic Programs" class="w-full h-48 object-cover">
                            <div class="p-6">
                                <h3 class="text-xl font-semibold text-msu-main-color dark:text-white mb-4">Explore Academic Programs</h3>
                                <ul class="space-y-2 text-gray-700 dark:text-gray-300">
                                    <li><a href="/programs/coed" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Education</a></li>
                                    <li><a href="/programs/cof" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Fishery</a></li>
                                    <li><a href="/programs/iict" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Information Technology</a></li>
                                    <li><a href="/programs/cias" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Islamic & Arabic Studies</a></li>
                                    <li><a href="/programs/ioes" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Oceanography</a></li>
                                    <li><a href="/programs/cas" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Science and Arts</a></li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Admissions Card -->
                        <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105">
                            <img src="/images/admission_scholarship/image1.png" alt="Admissions" class="w-full h-48 object-cover">
                            <div class="p-6">
                                <h3 class="text-xl font-semibold text-msu-main-color dark:text-white mb-4">Admission and Scholarships</h3>
                                <ul class="space-y-2 text-gray-700 dark:text-gray-300">
                                    <li><a href="/admissions/admissions" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Freshmen</a></li>
                                    <li><a href="/admissions/admissions" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Transferee</a></li>
                                    <li><a href="/admissions/admissions" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Returning / Shifting</a></li>
                                    <li><a href="/admissions/admissions" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Remedial Program</a></li>
                                    <li><a href="/admissions/admissions" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Student Fees</a></li>
                                    <li><a href="/admissions/admissions" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Scholarships and Grants</a></li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Offices Card -->
                        <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105">
                            <img src="/images/administrative_office/image1.png" alt="Administrative Offices" class="w-full h-48 object-cover">
                            <div class="p-6">
                                <h3 class="text-xl font-semibold text-msu-main-color dark:text-white mb-4">Visit Our Offices</h3>
                                <ul class="space-y-2 text-gray-700 dark:text-gray-300">
                                    <li><a href="/offices/offices" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Office of the Chancellor</a></li>
                                    <li><a href="/offices/offices" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Admin and Finance</a></li>
                                    <li><a href="/offices/offices" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Planning and Development</a></li>
                                    <li><a href="/offices/offices" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Administrative Offices</a></li>
                                    <li><a href="/offices/offices" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Academic Offices</a></li>
                                    <li><a href="/offices/offices" class="hover:text-msu-maroon dark:hover:text-[#61063B] transition-colors">Roster of Faculties</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chancellor's Message -->
        <!-- <ChancellorMessage /> -->

		<section id="publications"  class="bg-gray-50 dark:bg-gray-900 py-20">
			<div class="container mx-auto px-4 xl:px-24">
			  <!-- Heading -->
			  <div class="text-center mb-16">
				<h2 class="text-4xl font-extrabold text-msu-deep-ocean dark:text-white dark:text-outline mb-4 tracking-tight">University Publications</h2>
				<p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
				  Discover our Sulimbang and Annual Reports in visual format.
				</p>
				<div class="w-20 h-1 bg-[#61063B] mx-auto mt-6 rounded-full"></div>
			  </div>
		  
			  <div class="grid grid-cols-1 md:grid-cols-2 gap-14">
				<!-- Gazette Section -->
				<div class="flex flex-col items-center text-center">
				  <h3 class="text-2xl font-semibold text-msu-main-color dark:text-white dark:text-outline mb-4">
					<a href="/gazette" class="hover:underline">Sulimbang</a>
				  </h3>
		  
				  <!-- Image Thumbnails (Responsive, Equal Size) -->
				  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-3xl">
					{latestsulimbang.map((sulimbang) => (
					  <a href={sulimbang.file?.asset?.url || '#'} target="_blank" class="block w-full aspect-[3/4] overflow-hidden rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300">
						<img
						  src={sulimbang.mainImage?.asset?.url ? urlForImage(sulimbang.mainImage.asset.url).url() : '/images/default-thumbnail.jpg'}
						  alt={sulimbang.title || 'University Gazette'}
						  class="w-full h-full object-cover transition-transform duration-300 hover:scale-105"
						/>
					  </a>
					))}
				  </div>
		  
				  <a href="/publications/sulimbang" class="mt-6 inline-flex items-center px-6 py-3 border border-msu-main-color dark:border-[#61063B] text-msu-main-color dark:text-white dark:btn-outline rounded-full font-medium hover:bg-msu-main-color dark:hover:bg-[#03045e] hover:text-white transition duration-300">
					View All Sulimbang
				  </a>
				</div>
		  
				<!-- Annual Reports Section -->
				<div class="flex flex-col items-center text-center">
				  <h3 class="text-3xl font-semibold text-msu-main-color dark:text-white dark:text-outline mb-4">
					<a href="/annual-reports" class="hover:underline">Annual Reports</a>
				  </h3>
		  
				  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-3xl">
					{threeLatestAnnualReport.map((report) => (
					  <a href={report.file?.asset?.url || '#'} target="_blank" class="block w-full aspect-[3/4] overflow-hidden rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300">
						<img
						  src={report.mainImage?.asset?.url ? urlForImage(report.mainImage.asset.url).url() : '/images/default-thumbnail.jpg'}
						  alt={report.title || 'Annual Report'}
						  class="w-full h-full object-cover transition-transform duration-300 hover:scale-105"
						/>
					  </a>
					))}
				  </div>
		  
				  <a href="/publications/annual-reports" class="mt-6 inline-flex items-center px-6 py-3 border border-msu-main-color dark:border-[#61063B] text-msu-main-color dark:text-white dark:btn-outline rounded-full font-medium hover:bg-msu-main-color dark:hover:bg-[#03045e] hover:text-white transition duration-300">
					View All Reports
				  </a>
				</div>
			  </div>
			</div>
		  </section>

        <!-- Office Service Evaluation with Global Search -->
        <!-- <section id="service" class="bg-gradient-to-b from-gray-50 to-white py-16 md:py-24">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-6xl"> -->
                <!-- Section Header -->
                <!-- <div class="text-center mb-16">
                    <span class="inline-block px-4 py-2 bg-msu-main-color/10 text-msu-main-color text-sm font-semibold rounded-full mb-4">
                        Service Feedback
                    </span>
                    <h2 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-4">
                        Office Service <span class="text-msu-main-color">Evaluation</span>
                    </h2>
                    <div class="w-24 h-1.5 bg-gradient-to-r from-msu-gold to-msu-maroon mx-auto rounded-full"></div>
                    <p class="text-lg text-gray-600 mt-6 max-w-2xl mx-auto">
                        Your feedback helps us maintain excellence in university services
                    </p>
                </div> -->

                <!-- Evaluation Card -->
                <!-- <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100">
                    <!-- Card Header -->
                    <!-- <div class="bg-gradient-to-r from-msu-main-color to-msu-main-color px-8 py-6">
                        <div class="flex items-center">
                            <div class="bg-white/20 p-2 rounded-lg mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-white">Service Quality Assessment</h3>
                                <p class="text-white">Please complete all required fields</p>
                            </div>
                        </div>
                    </div> -->

                    <!-- Form Content -->
                    <!-- <div class="p-6 sm:p-8 md:p-10">
                        <form 
                            action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSfXYmBoB1ZQ9VLVOWq11YODOTFQQfiZGanv7Fvv2EcpO8qq9g/formResponse" 
                            method="POST" 
                            target="hiddenFrame"
                            id="evaluationForm" 
                            class="space-y-10"
                            novalidate
                        > -->
                            <!-- Hidden iframe for form submission -->
                            <!-- <iframe name="hiddenFrame" class="hidden"></iframe> -->
                            
                            <!-- Office Information Section with Global Search -->
                            <!-- <div class="space-y-8">
                                <div class="flex items-start">
                                    <div class="hidden sm:flex flex-shrink-0 items-center justify-center h-12 w-12 rounded-lg bg-msu-main-color/10 text-msu-main-color mr-6">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                                        </svg>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="text-lg font-semibold text-gray-900 mb-6 border-b pb-2">Office Information</h4> -->
                                        
                                        <!-- Global Search Component -->
                                        <!-- <div class="mb-8">
                                            <label for="globalSearch" class="block text-sm font-medium text-gray-700 mb-2">
                                                Find Office or Service
                                            </label>
                                            <div class="relative rounded-lg shadow-sm">
                                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                    <svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                                    </svg>
                                                </div>
                                                <input
                                                    type="text"
                                                    id="globalSearch"
                                                    class="block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-msu-main-color/50 focus:border-msu-main-color transition-all"
                                                    placeholder="Search all offices and services..."
                                                    autocomplete="off"
                                                />
                                                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                                    <span class="text-gray-500 text-sm hidden sm:inline">Press âŒ˜K</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="grid md:grid-cols-2 gap-6"> -->
                                            <!-- Office Selection -->
                                            <!-- <div class="form-group">
                                                <label for="office" class="block text-sm font-medium text-gray-700 mb-2 flex items-center">
                                                    Office to Evaluate
                                                    <span class="text-msu-maroon ml-1">*</span>
                                                </label>
                                                <div class="mt-1 relative">
                                                    <select 
                                                        id="office" 
                                                        name="entry.1924231474" 
                                                        required
                                                        class="office-select block w-full pl-4 pr-10 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-msu-main-color/50 focus:border-msu-main-color transition-all hover:border-gray-400"
                                                    >
                                                        <option value="" disabled selected>Select an office</option> -->
                                                        <!-- Administrative Offices -->
                                                        <!-- <optgroup label="Administrative Offices" class="text-gray-900">
                                                            <option value="BUDGET OFFICE" class="py-2">Budget Office</option>
                                                            <option value="INTERNAL CONTROL AND AUDIT UNIT">Internal Control and Audit Unit</option>
                                                            <option value="ACCOUNTING OFFICE">Accounting Office</option>
                                                            <option value="CASHIERING OFFICE">Cashiering Office</option>
                                                            <option value="OFFICE OF THE CHANCELLOR">Office of the Chancellor</option>
                                                            <option value="GENERAL SERVICES OFFICE">General Services Office</option>
                                                            <option value="OFFICE OF MEDICAL AND WELLNESS SERVICES">Office of Medical and Wellness Services</option>
                                                            <option value="MANILA INFORMATION AND LIAISON OFFICE">Manila Information and Liaison Office</option>
                                                            <option value="OFFICE OF THE FINANCE DIR">Office of the Finance Director</option>
                                                            <option value="OFFICE OF THE VICE CHANCELLOR FOR ADMINISTRATION AND FINANCE">Vice Chancellor for Administration and Finance</option>
                                                            <option value="HUMAN RESOURCE DEVELOPMENT OFFICE">Human Resource Development Office</option>
                                                            <option value="PHYSICAL PLANT OFFICE">Physical Plant Office</option>
                                                            <option value="PROCUREMENT OFFICE">Procurement Office</option>
                                                            <option value="SECURITY FORCE">Security Force</option>
                                                            <option value="SUPPLY AND PROPERTY OFFICE">Supply and Property Office</option>
                                                        </optgroup> -->
                                                        
                                                        <!-- Academic Offices -->
                                                        <!-- <optgroup label="Academic Offices">
                                                            <option value="ADMISSION OFFICE">Admission Office</option>
                                                            <option value="ALUMNI AND CAREER CENTER OFFICE">Alumni and Career Center Office</option>
                                                            <option value="COLLEGE LIBRARY">College Library</option>
                                                            <option value="COLLEGE OF EDUCATION">College of Education</option>
                                                            <option value="INSTITUTE OF INFORMATION AND COMMUNICATIONS TECHNOLOGY">Institute of ICT</option>
                                                            <option value="GRADUATE SCHOOL">Graduate School</option>
                                                            <option value="COLLEGE OF FISHERIES">College of Fisheries</option>
                                                            <option value="COLLEGE OF ISLAMIC AND ARABIC STUDIES">College of Islamic and Arabic Studies</option>
                                                            <option value="OFFICE OF THE REGISTRAR">Office of the Registrar</option>
                                                        </optgroup>
                                                         -->
                                                        <!-- Extension & Research -->
                                                        <!-- <optgroup label="Extension & Research">
                                                            <option value="EXTENSION SERVICES">Extension Services</option>
                                                            <option value="RESEARCH SERVICES">Research Services</option>
                                                            <option value="CENTER FOR OCEAN STUDIES">Center for Ocean Studies</option>
                                                            <option value="OCEANOGRAPHY AND FISH TECHNOLOGY CENTER">Oceanography and Fish Technology Center</option>
                                                            <option value="OFFICE OF THE VICE CHANCELLOR FOR RESEARCH INNOVATION DEVELOPMENT AND EXTENSION">Vice Chancellor for Research, Innovation, Development and Extension</option>
                                                        </optgroup>
                                                         -->
                                                        <!-- Other Units -->
                                                        <!-- <optgroup label="Other Units">
                                                            <option value="CAFETERIA">Cafeteria</option>
                                                            <option value="GUIDANCE AND COUNSELING OFFICE">Guidance and Counseling Office</option>
                                                            <option value="QUALITY ASSURANCE & ACCREDITATION OFFICE">Quality Assurance & Accreditation Office</option>
                                                        </optgroup>
                                                    </select>
                                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                                        <svg class="h-5 w-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                                        </svg>
                                                    </div>
                                                </div>
                                                <p class="mt-1 text-sm text-red-600 hidden" id="office-error">Please select an office</p>
                                            </div>
                                             -->
                                            <!-- Status Selection -->
                                            <!-- <div class="form-group">
                                                <label for="status" class="block text-sm font-medium text-gray-700 mb-2 flex items-center">
                                                    Your Status
                                                    <span class="text-msu-maroon ml-1">*</span>
                                                </label>
                                                <div class="mt-1 relative">
                                                    <select 
                                                        id="status" 
                                                        name="entry.724584061" 
                                                        required
                                                        class="block w-full pl-4 pr-10 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-msu-main-color/50 focus:border-msu-main-color transition-all hover:border-gray-400"
                                                    >
                                                        <option value="" disabled selected>Select your status</option>
                                                        <option value="Permanent">Permanent</option>
                                                        <option value="Temporary">Temporary</option>
                                                        <option value="Contractual">Contractual</option>
                                                        <option value="Contract of Service">Contract of Service</option>
                                                        <option value="Casual">Casual</option>
                                                        <option value="Regular">Regular</option>
                                                        <option value="Provisional">Provisional</option>
                                                        <option value="Othes">Other</option>
                                                    </select>
                                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                                        <svg class="h-5 w-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                                        </svg>
                                                    </div>
                                                </div>
                                                <p class="mt-1 text-sm text-red-600 hidden" id="status-error">Please select your status</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->

                            <!-- Performance Evaluation Section -->
                            <!-- <div class="space-y-8">
                                <div class="flex items-start">
                                    <div class="hidden sm:flex flex-shrink-0 items-center justify-center h-12 w-12 rounded-lg bg-msu-main-color/10 text-msu-main-color mr-6">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                                        </svg>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="text-lg font-semibold text-gray-900 mb-6 border-b pb-2">Service Ratings</h4>
                                        
                                        <div class="space-y-8">
                                            <!-- Rating Items -->
                                            <!-- {[
                                                {
                                                    id: 'job_knowledge',
                                                    title: 'Job Knowledge',
                                                    description: 'Understanding and application of job requirements',
                                                    field: 'entry.1195783547'
                                                },
                                                {
                                                    id: 'work_quality',
                                                    title: 'Service Quality',
                                                    description: 'Accuracy and effectiveness of service provided',
                                                    field: 'entry.229158245'
                                                },
                                                {
                                                    id: 'responsiveness',
                                                    title: 'Responsiveness',
                                                    description: 'Timeliness in addressing requests and concerns',
                                                    field: 'entry.1473816641'
                                                },
                                                {
                                                    id: 'courtesy',
                                                    title: 'Courtesy',
                                                    description: 'Professionalism and politeness of staff',
                                                    field: 'entry.2058011824'
                                                },
                                                {
                                                    id: 'overall',
                                                    title: 'Overall Satisfaction',
                                                    description: 'Your overall experience with this office',
                                                    field: 'entry.28013097'
                                                }
                                            ].map((item) => (
                                                <div class="form-group">
                                                    <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-3">
                                                        <label class="text-sm font-medium text-gray-700 flex items-center">
                                                            {item.title}
                                                            <span class="text-msu-maroon ml-1">*</span>
                                                        </label>
                                                        <span class="text-xs text-gray-500 mt-1 sm:mt-0">
                                                            {item.description}
                                                        </span>
                                                    </div>
                                                    
                                                    <div class="mt-4">
                                                        <div class="flex items-center justify-between">
                                                            {[1, 2, 3, 4, 5].map((rating) => (
                                                                <div class="flex flex-col items-center">
                                                                    <input
                                                                        type="radio" 
                                                                        id={`${item.id}${rating}`}
                                                                        name={item.field}
                                                                        value={rating}
                                                                        required
                                                                        class="h-5 w-5 text-msu-main-color focus:ring-msu-main-color border-gray-300"
                                                                    />
                                                                    <label for={`${item.id}${rating}`} class="mt-2 text-xs font-medium text-gray-500">
                                                                        {
                                                                        rating === 1 ? 'Very Poor' : 
                                                                        rating === 2 ? 'Poor' : 
                                                                        rating === 3 ? 'Neutral' : 
                                                                        rating === 4 ? 'Good' : 
                                                                        rating === 5 ? 'Great' : ''}
                                                                    </label>
                                                                </div>
                                                            ))}
                                                        </div>
                                                        <p class="mt-1 text-sm text-red-600 hidden" id={`${item.id}-error`}>Please select a rating</p>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div> --> 

                            <!-- Comments Section -->
                            <!-- <div class="space-y-8">
                                <div class="flex items-start">
                                    <div class="hidden sm:flex flex-shrink-0 items-center justify-center h-12 w-12 rounded-lg bg-msu-main-color/10 text-msu-main-color mr-6">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                                        </svg>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="text-lg font-semibold text-gray-900 mb-6 border-b pb-2">Additional Feedback</h4>
                                        
                                        <div class="form-group">
                                            <label for="comments" class="block text-sm font-medium text-gray-700 mb-2">
                                                Specific feedback or suggestions for improvement
                                            </label>
                                            <textarea 
                                                id="comments" 
                                                name="entry.1589457788" 
                                                rows="4"
                                                placeholder="Please share any specific experiences or suggestions that could help us improve..."
                                                class="block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-msu-main-color/50 focus:border-msu-main-color transition-all hover:border-gray-400"
                                            ></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div> -->

                            <!-- Form Footer -->
                            <!-- <div class="pt-6">
                                <div class="flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0">
                                    <p class="text-sm text-gray-500">
                                        All responses are confidential and will be used for service improvement.
                                    </p>
                                    <button
                                        type="submit"
                                        id="submitBtn"
                                        class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-gradient-to-r from-msu-main-color to-msu-deep-ocean hover:from-msu-main-color-dark hover:to-msu-maroon-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-msu-main-color transition-all transform hover:-translate-y-0.5 hover:shadow-md disabled:opacity-70 disabled:cursor-not-allowed"
                                    >
                                        <span id="submitText">Submit Evaluation</span>
                                        <svg id="submitSpinner" class="hidden h-5 w-5 ml-2 animate-spin text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                        <svg id="submitArrow" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2 -mr-1" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div> -->



               

        </section>


        
           
   
        <!-- Scroll to Top Button -->
        <button class="scroll-to-top" aria-label="Scroll to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
            </svg>
        </button>


        <!-- Chatbot and Show Ad Button Container -->
        <div class="fixed bottom-16 left-5 z-40 flex flex-col items-end space-y-3">
          <!-- Chatbot -->
          <!-- <div id="chatbot" class="mb-2">
            <script src="https://insights.elishatelecom.com/aichat/public/snippet_assets/js/include-chatbot.min.js"></script>
            <div include-html="https://insights.elishatelecom.com/aichat/embedded-chatbot?key=guXJzVN2UnYvtbBf70C3GKEpDF5wZ9ad"></div>
          </div> -->
          
          <!-- Show Ad Button -->
          <button 
            id="showAdButton"
            class="bg-msu-deep-ocean text-white rounded-full w-12 h-12 flex items-center justify-center hover:bg-black/80 transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-white/50 group"
            title="Show advertisement"
          >
            <!-- Eye icon -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
            
            <!-- Tooltip message that appears for 5 seconds -->
            <div id="adButtonTooltip" class="absolute left-full ml-2 bg-gray-900 text-white text-sm px-3 py-1 rounded whitespace-nowrap opacity-0 transition-opacity duration-300 pointer-events-none">
              Click me to show advertisement again
            </div>
          </button>
        </div>

<script>
window.addEventListener('load', function() {
  const adOverlay = document.getElementById('adOverlay');
  const showAdButton = document.getElementById('showAdButton');
  const tooltip = document.getElementById('adButtonTooltip');
  
  // Check if all required elements exist
  if (!adOverlay || !showAdButton || !tooltip) {
    console.warn('Advertisement elements not found, skipping ad functionality');
    return;
  }
  
  // Initially hide both elements
  showAdButton.classList.add('hidden');
  tooltip.classList.add('hidden');
  
  // Show ad after 2 seconds
  setTimeout(function() {
    if (adOverlay) {
      adOverlay.classList.remove('hidden');
    }
  }, 2000);
  
  // When closing the ad
  const closeButton = adOverlay.querySelector('button[aria-label="Close advertisement"]');
  if (closeButton) {
    closeButton.addEventListener('click', function() {
      if (adOverlay) adOverlay.classList.add('hidden');
      if (showAdButton) showAdButton.classList.remove('hidden');
      
      // Show tooltip for 5 seconds
      if (tooltip) {
        tooltip.classList.remove('hidden');
        setTimeout(() => {
          if (tooltip) tooltip.classList.remove('opacity-0');
        }, 10); // Small delay for transition
        
        setTimeout(() => {
          if (tooltip) {
            tooltip.classList.add('opacity-0');
            setTimeout(() => {
              if (tooltip) tooltip.classList.add('hidden');
            }, 300); // Wait for transition to complete
          }
        }, 5000); // Hide after 5 seconds
      }
    });
  }
  
  // When reopening the ad
  showAdButton.addEventListener('click', function() {
    if (adOverlay) adOverlay.classList.remove('hidden');
    if (showAdButton) showAdButton.classList.add('hidden');
    if (tooltip) tooltip.classList.add('hidden', 'opacity-0');
  });
  
  // Optional: Show tooltip on hover after the initial 5 seconds
  showAdButton.addEventListener('mouseenter', function() {
    if (tooltip && tooltip.classList.contains('hidden')) {
      tooltip.classList.remove('hidden');
      setTimeout(() => {
        if (tooltip) tooltip.classList.remove('opacity-0');
      }, 10);
    }
  });
  
  showAdButton.addEventListener('mouseleave', function() {
    if (tooltip && !tooltip.classList.contains('hidden')) {
      tooltip.classList.add('opacity-0');
      setTimeout(() => {
        if (tooltip) tooltip.classList.add('hidden');
      }, 300);
    }
  });
});
</script>


      

         <!-- Footer Navigation -->
        <FooterNav class="relative z-50" />
        
        <!-- Footer -->
        <Footer class="relative z-50" />
        

    </main>
</Layout>

<script src="../js/animate.js" ></script>
<script src="../js/loadinganim.js" ></script>
<script src="../js/smoothscroll.js" ></script>

<!-- Enhanced Enrollment Process Interactive Animations -->
<script>
// Enrollment Process Interactive Animations
document.addEventListener('DOMContentLoaded', function() {
    // Initialize enrollment step animations
    initializeEnrollmentAnimations();
    
    function initializeEnrollmentAnimations() {
        const steps = document.querySelectorAll('.enrollment-step');
        const progressBar = document.getElementById('enrollment-progress');
        const progressText = document.getElementById('progress-text');
        const floatingProgress = document.getElementById('floating-progress');
        const currentStepIndicator = document.getElementById('current-step-indicator');
        
        if (!steps.length) {
            console.warn('Enrollment animation elements not found');
            return;
        }
        
        let currentStep = 0;
        let isAnimating = false;
        const totalSteps = 7; // Updated to match new flowchart design
        
        // Initialize step states
        steps.forEach((step, index) => {
            const htmlStep = step as HTMLElement;
            htmlStep.style.opacity = '0.6';
            htmlStep.style.transform = 'translateY(30px)';
            htmlStep.classList.add('transition-all', 'duration-1000', 'ease-out');
        });
        
        // Intersection Observer for scroll-triggered animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !isAnimating) {
                    startEnrollmentAnimation();
                }
            });
        }, {
            threshold: 0.2,
            rootMargin: '-50px 0px'
        });
        
        // Observe the enrollment section
        const enrollmentSection = document.querySelector('.enrollment-step')?.closest('section');
        if (enrollmentSection) {
            observer.observe(enrollmentSection);
        }
        
        function startEnrollmentAnimation() {
            isAnimating = true;
            
            // Animate steps sequentially with enhanced timing
            const animateStep = (index) => {
                if (index >= steps.length) {
                    isAnimating = false;
                    return;
                }
                
                const step = steps[index];
                
                setTimeout(() => {
                    // Animate step appearance
                    const htmlStep = step as HTMLElement;
                    htmlStep.style.opacity = '1';
                    htmlStep.style.transform = 'translateY(0) scale(1)';
                    
                    // Update progress indicators
                    currentStep = index + 1;
                    const progressPercent = (currentStep / totalSteps) * 100;
                    
                    // Update main progress bar
                    if (progressBar) {
                        (progressBar as HTMLElement).style.width = `${progressPercent}%`;
                    }
                    if (progressText) {
                        progressText.textContent = `${currentStep}/${totalSteps}`;
                    }
                    
                    // Update floating progress indicator
                    if (floatingProgress) {
                        (floatingProgress as HTMLElement).style.width = `${progressPercent}%`;
                    }
                    if (currentStepIndicator) {
                        currentStepIndicator.textContent = `${currentStep}`;
                    }
                    
                    // Add completion effect with enhanced animation
                    setTimeout(() => {
                        step.classList.add('animate-pulse-subtle');
                        
                        // Add special completion effect for final step
                        if (index === steps.length - 1) {
                            const finalIcon = step.querySelector('.rounded-full svg');
                            if (finalIcon) {
                                finalIcon.classList.add('animate-ping');
                                setTimeout(() => {
                                    finalIcon.classList.remove('animate-ping');
                                }, 2000);
                            }
                        }
                        
                        setTimeout(() => {
                            step.classList.remove('animate-pulse-subtle');
                        }, 800);
                    }, 400);
                    
                    // Continue to next step
                    animateStep(index + 1);
                }, index < 3 ? index * 300 : (index - 3) * 250 + 900); // Different timing for top/bottom rows
            };
            
            animateStep(0);
        }
        
        // Enhanced hover interactions
        steps.forEach((step, index) => {
            const stepNumber = index + 1;
            
            step.addEventListener('mouseenter', function() {
                if (!isAnimating) {
                    const htmlThis = this as HTMLElement;
                    htmlThis.style.transform = 'translateY(-12px) scale(1.05)';
                    htmlThis.style.filter = 'drop-shadow(0 20px 30px rgba(0,0,0,0.15))';
                    
                    // Enhanced progress highlighting
                    if (floatingProgress) {
                        const hoverProgress = (stepNumber / totalSteps) * 100;
                        (floatingProgress as HTMLElement).style.background = `linear-gradient(to right, #10b981 0%, #10b981 ${hoverProgress}%, #f59e0b ${hoverProgress}%, #f59e0b 100%)`;
                    }
                    
                    // Highlight step indicator
                    if (currentStepIndicator) {
                        currentStepIndicator.textContent = `${stepNumber}`;
                        currentStepIndicator.style.color = '#f59e0b';
                        currentStepIndicator.style.transform = 'scale(1.2)';
                    }
                }
            });
            
            step.addEventListener('mouseleave', function() {
                if (!isAnimating) {
                    const htmlThis = this as HTMLElement;
                    htmlThis.style.transform = 'translateY(0) scale(1)';
                    htmlThis.style.filter = '';
                    
                    // Reset progress indicators
                    if (floatingProgress) {
                        (floatingProgress as HTMLElement).style.background = '';
                    }
                    if (currentStepIndicator) {
                        currentStepIndicator.textContent = `${currentStep}`;
                        currentStepIndicator.style.color = '';
                        currentStepIndicator.style.transform = '';
                    }
                }
            });
            
            // Enhanced click interaction
            step.addEventListener('click', function() {
                if (!isAnimating) {
                    showStepDetails(stepNumber, this);
                }
            });
        });
        
        function showStepDetails(stepNumber, stepElement) {
            // Create modal overlay
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4';
            modal.style.animation = 'fadeIn 0.3s ease-out';
            
            const content = stepElement.querySelector('div').cloneNode(true);
            content.className = 'bg-white rounded-2xl p-8 max-w-md w-full transform transition-all duration-300 scale-95';
            
            // Add close button
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            `;
            closeBtn.className = 'absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors';
            
            (content as HTMLElement).style.position = 'relative';
            content.appendChild(closeBtn);
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // Animate in
            setTimeout(() => {
                (content as HTMLElement).style.transform = 'scale(1)';
            }, 10);
            
            // Close handlers
            const closeModal = () => {
                (modal as HTMLElement).style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => {
                    document.body.removeChild(modal);
                }, 300);
            };
            
            closeBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });
            
            document.addEventListener('keydown', function escHandler(e) {
                if (e.key === 'Escape') {
                    closeModal();
                    document.removeEventListener('keydown', escHandler);
                }
            });
        }
    }
});

// Events Dropdown JavaScript
document.addEventListener('DOMContentLoaded', function() {
    const dropdownBtn = document.getElementById('eventsDropdownBtn');
    const dropdown = document.getElementById('eventsDropdown');
    const dropdownArrow = document.getElementById('dropdownArrow');
    const backdrop = document.getElementById('eventsBackdrop');
    const closeBtn = document.getElementById('closeEventsModal');
    
    if (dropdownBtn && dropdown && dropdownArrow && backdrop && closeBtn) {
        let isOpen = false;
        
        function openModal() {
            isOpen = true;
            backdrop.classList.remove('opacity-0', 'pointer-events-none');
            backdrop.classList.add('opacity-100', 'pointer-events-auto');
            dropdown.classList.remove('opacity-0', 'pointer-events-none', 'scale-95');
            dropdown.classList.add('opacity-100', 'pointer-events-auto', 'scale-100');
            dropdownArrow.style.transform = 'rotate(180deg)';
            dropdownBtn.classList.add('ring-2', 'ring-[#61063B]/50');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }
        
        function closeModal() {
            isOpen = false;
            backdrop.classList.add('opacity-0', 'pointer-events-none');
            backdrop.classList.remove('opacity-100', 'pointer-events-auto');
            dropdown.classList.add('opacity-0', 'pointer-events-none', 'scale-95');
            dropdown.classList.remove('opacity-100', 'pointer-events-auto', 'scale-100');
            dropdownArrow.style.transform = 'rotate(0deg)';
            dropdownBtn.classList.remove('ring-2', 'ring-[#61063B]/50');
            document.body.style.overflow = ''; // Restore scrolling
        }
        
        dropdownBtn.addEventListener('click', function(e) {
            e.preventDefault();
            if (isOpen) {
                closeModal();
            } else {
                openModal();
            }
        });
        
        // Close dropdown when clicking backdrop
        backdrop.addEventListener('click', function() {
            if (isOpen) {
                closeModal();
            }
        });
        
        // Close dropdown when clicking close button
        closeBtn.addEventListener('click', function() {
            if (isOpen) {
                closeModal();
            }
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const target = e.target as Node;
            if (!dropdownBtn.contains(target) && !dropdown.contains(target) && !backdrop.contains(target)) {
                if (isOpen) {
                    closeModal();
                }
            }
        });
        
        // Close dropdown on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && isOpen) {
                closeModal();
            }
        });
    }
});
</script>

<!-- Custom Scrollbar Styles -->
<style>
/* Dark mode text styling */
.dark .text-outline {
    color: white !important;
}

/* Button styling for dark mode */
.dark .btn-outline {
    color: white !important;
    border: 2px solid #61063B;
    background: transparent;
    box-shadow: 0 0 10px rgba(97, 6, 59, 0.3);
}

.dark .btn-outline:hover {
    background: linear-gradient(135deg, #61063B 0%, #03045e 100%);
    color: white !important;
    box-shadow: 0 0 15px rgba(97, 6, 59, 0.6);
}

.custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #1e3a8a #e5e7eb;
}

.custom-scrollbar::-webkit-scrollbar {
    width: 8px;
}

.custom-scrollbar::-webkit-scrollbar-track {
    background: #f3f4f6;
    border-radius: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, #1e3a8a, #7c3aed);
    border-radius: 4px;
    transition: background 0.3s ease;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to bottom, #1e40af, #6d28d9);
}

/* Enhanced animations for dropdown */
@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes slideUp {
    from {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    to {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
    }
}

/* Hover effects for event cards in dropdown */
#eventsDropdown .group:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Featured badge animation */
#eventsDropdown .ring-2 {
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% {
        box-shadow: 0 0 0 0 rgba(97, 6, 59, 0.7);
    }
    50% {
        box-shadow: 0 0 0 10px rgba(97, 6, 59, 0);
    }
}

/* Enhanced Enrollment Process Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.95);
    }
}

@keyframes slide-up {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-fade-in {
    animation: fadeIn 0.8s ease-out;
}

.animate-slide-up {
    animation: slide-up 0.8s ease-out;
}

.animate-slide-up.delay-100 {
    animation-delay: 0.1s;
    animation-fill-mode: both;
}

.animate-slide-up.delay-200 {
    animation-delay: 0.2s;
    animation-fill-mode: both;
}

.animate-pulse-subtle {
    animation: pulse-subtle 0.5s ease-in-out;
}

@keyframes pulse-subtle {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
    }
}

/* Enrollment step hover effects */
.enrollment-step {
    cursor: pointer;
}

.enrollment-step:hover .group-hover\:scale-110 {
    transform: scale(1.1) !important;
}

/* Progress line animation */
#progress-line {
    background: linear-gradient(90deg, #1e40af, #61063B, #10b981);
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
}

/* Modal animations */
@keyframes modalFadeIn {
    from {
        opacity: 0;
        backdrop-filter: blur(0px);
    }
    to {
        opacity: 1;
        backdrop-filter: blur(8px);
    }
}

@keyframes modalFadeOut {
    from {
        opacity: 1;
        backdrop-filter: blur(8px);
    }
    to {
        opacity: 0;
        backdrop-filter: blur(0px);
    }
}

/* Responsive animations */
@media (max-width: 768px) {
    .enrollment-step {
        margin-bottom: 1rem;
    }
    
    .enrollment-step:hover {
        transform: translateY(-4px) !important;
    }
}

/* Lifeline & Bubble Animation Enhancements */
.lifeline-bubble,
.progress-bubble,
.realistic-bubble,
.main-bubble,
.bubble-animation,
.vertical-bubble {
    filter: drop-shadow(0 3px 6px rgba(0,0,0,0.15));
    transition: all 0.3s ease;
}

.lifeline-bubble:hover,
.progress-bubble:hover,
.realistic-bubble:hover,
.main-bubble:hover,
.bubble-animation:hover,
.vertical-bubble:hover {
    filter: drop-shadow(0 6px 12px rgba(0,0,0,0.25));
}

/* SVG Animation Performance */
svg {
    will-change: transform;
    backface-visibility: hidden;
}

/* Enhanced realistic bubble glow effects */
@keyframes realistic-bubble-glow {
    0%, 100% {
        filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.6)) drop-shadow(0 0 8px rgba(59, 130, 246, 0.3));
    }
    50% {
        filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.9)) drop-shadow(0 0 16px rgba(59, 130, 246, 0.6));
    }
}

@keyframes main-bubble-glow {
    0%, 100% {
        filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.7)) drop-shadow(0 0 12px rgba(97, 6, 59, 0.4));
    }
    50% {
        filter: drop-shadow(0 0 12px rgba(255, 255, 255, 1)) drop-shadow(0 0 24px rgba(97, 6, 59, 0.8));
    }
}

@keyframes lifeline-glow {
    0%, 100% {
        filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.8)) drop-shadow(0 0 10px rgba(59, 130, 246, 0.5));
    }
    50% {
        filter: drop-shadow(0 0 10px rgba(255, 255, 255, 1)) drop-shadow(0 0 20px rgba(59, 130, 246, 0.9));
    }
}

@keyframes progress-pulse {
    0%, 100% {
        filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.9)) drop-shadow(0 0 16px rgba(16, 185, 129, 0.6));
    }
    50% {
        filter: drop-shadow(0 0 16px rgba(255, 255, 255, 1)) drop-shadow(0 0 32px rgba(16, 185, 129, 1));
    }
}

.realistic-bubble {
    animation: realistic-bubble-glow 3s ease-in-out infinite;
}

.main-bubble {
    animation: main-bubble-glow 4s ease-in-out infinite;
}

.bubble-animation {
    animation: realistic-bubble-glow 4s ease-in-out infinite;
}

.lifeline-bubble {
    animation: lifeline-glow 5s ease-in-out infinite;
}

.progress-bubble {
    animation: progress-pulse 6s ease-in-out infinite;
}

/* 3D Tube Effects */
ellipse[fill*="tubeGradient"] {
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
}

path[stroke*="tubeShadow"] {
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
}

/* Lifeline Path Effects */
#continuousLifeline {
    filter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.4)) drop-shadow(0 0 8px rgba(16, 185, 129, 0.3));
    transition: all 0.3s ease;
}

#continuousLifeline:hover {
    filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.8)) drop-shadow(0 0 16px rgba(16, 185, 129, 0.6));
}

/* Vertical line pulse effect */
#verticalPath {
    animation: line-pulse 3s ease-in-out infinite;
}

@keyframes line-pulse {
    0%, 100% {
        stroke-width: 2;
        opacity: 0.8;
    }
    50% {
        stroke-width: 3;
        opacity: 1;
    }
}

/* Connection line hover effects */
svg:hover .bubble-animation,
svg:hover .vertical-bubble,
svg:hover .realistic-bubble,
svg:hover .main-bubble,
svg:hover .lifeline-bubble,
svg:hover .progress-bubble {
    animation-duration: 1.5s !important;
}

svg:hover path {
    stroke-width: 3;
    transition: stroke-width 0.3s ease;
}

svg:hover ellipse[fill*="tubeGradient"] {
    opacity: 0.8 !important;
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3)) !important;
    transition: all 0.3s ease;
}

/* Floating progress enhancement */
#floating-progress {
    box-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
    transition: all 0.5s ease;
}

#current-step-indicator {
    transition: all 0.3s ease;
}

/* Accessibility improvements */
@media (prefers-reduced-motion: reduce) {
    .enrollment-step,
    .animate-fade-in,
    .animate-slide-up,
    .animate-pulse-subtle,
    #progress-line,
    #enrollment-progress,
    .bubble-animation,
    .vertical-bubble,
    .realistic-bubble,
    .main-bubble,
    .lifeline-bubble,
    .progress-bubble,
    animateMotion,
    animate {
        animation: none !important;
        transition: none !important;
    }
    
    /* Hide animated elements for users who prefer reduced motion */
    .bubble-animation,
    .vertical-bubble,
    .realistic-bubble,
    .main-bubble,
    .lifeline-bubble,
    .progress-bubble {
        display: none;
    }
    
    /* Keep static elements visible */
    path[stroke-dasharray] {
        stroke-dasharray: none;
    }
    
    /* Show static tube backgrounds only */
    ellipse[fill*="tubeGradient"] {
        opacity: 0.3 !important;
    }
    
    /* Show static lifeline path */
    #continuousLifeline {
        opacity: 0.5 !important;
        filter: none !important;
    }
}
</style>

