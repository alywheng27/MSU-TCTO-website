---
import { urlForImage } from '../api/api';

import { get5LatestArticle } from '../api/api';
const fiveLatestArticles = await get5LatestArticle();
---

<div class="bg-gradient-to-br from-msu-deep-ocean via-msu-main-color to-msu-deep-ocean dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 text-white-pure dark:text-gray-100 transition-all duration-500 min-h-screen">

	<!-- Professional Header Section -->
	<div class="xl:px-[240px] xs:px-[20px] pt-16 pb-8">
		<div class="text-center mb-12">
			<!-- Professional Icon -->
			<div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-white/20 to-white/10 dark:from-yellow-500/20 dark:to-yellow-400/10 rounded-2xl mb-6 backdrop-blur-lg border border-white/30 dark:border-yellow-500/30 shadow-2xl">
				<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white-pure dark:text-yellow-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />
				</svg>
			</div>
			
			<!-- Enhanced Typography -->
			<h2 class="headings xl:h2 xs:h3 text-center font-bold tracking-wider mb-4 text-white-pure dark:text-gray-100">
				Latest Stories
			</h2>
			<p class="text-white-pure/80 dark:text-gray-300 text-lg max-w-2xl mx-auto leading-relaxed">
				Discover our most recent articles, insights, and updates from MSU TCTO
			</p>
			
			<!-- Decorative Element -->
			<div class="w-24 h-1 bg-gradient-to-r from-yellow-400 to-yellow-600 dark:from-yellow-300 dark:to-yellow-500 mx-auto mt-6 rounded-full"></div>
		</div>
	</div>

	<!-- Professional Stories Grid Layout - 3x2 Display -->
	<div class="xl:px-[240px] xs:px-[20px] pb-20">
		<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto">
			{
				fiveLatestArticles.map((article: {
					title: unknown; 
					body: [
						{
							children: [
								{
									text: unknown;
								}
							]
						}
					];
					mainImage: {
						asset: {
							url: string
						};
					};
					slug: {
						current: unknown;
					};
				}, index: number) => (
					<div class="group">
						<!-- Professional Card Design - Similar to Sulimbang Cards -->
						<div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 border border-gray-100 dark:border-gray-700 h-full flex flex-col">
							<!-- Image Container -->
							<div class="relative overflow-hidden h-48">
								<img 
									src={urlForImage(article.mainImage.asset.url).url()} 
									alt="" 
									class="w-full h-full object-cover object-center transition-transform duration-500 group-hover:scale-105"
								/>
								<!-- Gradient Overlay -->
								<div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
								
								<!-- Article Number Badge -->
								<div class="absolute top-3 left-3">
									<span class="inline-flex items-center justify-center w-6 h-6 bg-yellow-500/90 dark:bg-yellow-400/90 text-white font-bold text-xs rounded-full shadow-md">
										{index + 1}
									</span>
								</div>
							</div>
							
							<!-- Content Section -->
							<div class="p-4 flex-grow flex flex-col">
								<!-- Article Title -->
								<h3 class="headings h5 font-bold text-gray-900 dark:text-gray-100 group-hover:text-yellow-600 dark:group-hover:text-yellow-400 transition-colors duration-300 leading-tight mb-2 line-clamp-2">
									{article.title}
								</h3>
								
								<!-- Article Description -->
								<p class="paragraph p3 text-gray-600 dark:text-gray-300 leading-relaxed mb-4 flex-grow line-clamp-3">
									{article.body[0].children[0].text}
								</p>
								
								<!-- Action Buttons - Similar to Sulimbang Archive -->
								<div class="flex items-center justify-between pt-3 border-t border-gray-100 dark:border-gray-700">
									<a 
										href={`/${article.slug.current}`} 
										class="inline-flex items-center text-yellow-600 dark:text-yellow-400 hover:text-yellow-700 dark:hover:text-yellow-300 font-medium text-sm transition-all duration-300 group-hover:translate-x-1"
									>
										<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
										</svg>
										Open
									</a>
									
									<a 
										href={`/${article.slug.current}`} 
										class="inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-yellow-600 dark:hover:text-yellow-400 font-medium text-sm transition-all duration-300"
									>
										<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
										</svg>
										Read
									</a>
								</div>
							</div>
						</div>
					</div>
				))
			}
		</div>
		
		<!-- Professional Call-to-Action Section -->
		<div class="text-center mt-16">
			<div class="bg-white/10 dark:bg-gray-800/30 backdrop-blur-lg rounded-2xl p-8 border border-white/20 dark:border-gray-700/50">
				<h3 class="headings h4 font-bold text-white-pure dark:text-gray-100 mb-4">
					Stay Updated with Our Latest Stories
				</h3>
				<p class="text-white-pure/80 dark:text-gray-300 mb-6 max-w-2xl mx-auto">
					Get the latest news, research updates, and insights from MSU Tawi-Tawi College of Technology and Oceanography
				</p>
				<a 
					href="/publications/articles" 
					class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-yellow-500 to-yellow-600 dark:from-yellow-400 dark:to-yellow-500 text-white font-semibold rounded-xl hover:from-yellow-600 hover:to-yellow-700 dark:hover:from-yellow-500 dark:hover:to-yellow-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1"
				>
					View All Articles
					<svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
					</svg>
				</a>
			</div>
		</div>
	</div>
</div>

<style>
	/* Professional Animations */
	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translateY(30px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@keyframes shimmer {
		0% {
			background-position: -200px 0;
		}
		100% {
			background-position: calc(200px + 100%) 0;
		}
	}

	@keyframes float {
		0%, 100% {
			transform: translateY(0);
		}
		50% {
			transform: translateY(-10px);
		}
	}

	/* Enhanced Card Hover Effects */
	.group:hover .backdrop-blur-lg {
		backdrop-filter: blur(25px);
	}

	/* Professional Loading States */
	.loading {
		background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
		background-size: 200px 100%;
		animation: shimmer 1.5s infinite;
	}

	/* Dark Mode Enhancements */
	.dark .bg-gradient-to-br {
		background: linear-gradient(135deg, #1f2937 0%, #374151 50%, #1f2937 100%);
	}

	/* Responsive Design Enhancements */
	@media (max-width: 768px) {
		.group:hover .backdrop-blur-lg {
			backdrop-filter: blur(20px);
		}
	}

	/* Professional Typography */
	.headings {
		font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
	}

	.paragraph {
		font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
	}

	/* Line Clamp Utilities */
	.line-clamp-2 {
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	.line-clamp-3 {
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	/* Enhanced Gradient Effects */
	.bg-gradient-to-br {
		background-size: 200% 200%;
		animation: gradientShift 8s ease infinite;
	}

	@keyframes gradientShift {
		0%, 100% {
			background-position: 0% 50%;
		}
		50% {
			background-position: 100% 50%;
		}
	}
</style>