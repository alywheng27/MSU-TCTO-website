---
import { get3LettersMonth } from '../js/date';
import { getDay } from '../js/date';

import { get16UpcomingEvents } from '../api/api';
import { get3UpcomingEvents } from '../api/api';

const sixteenUpcomingEvents = await get16UpcomingEvents();
const threeUpcomingEvents = await get3UpcomingEvents();
---

<div class="xl:bg-msu-deep-ocean xs:bg-black-pure w-full px-[12.5%] flex  flex-col pt-20">
	<div class="flex flex-col items-center">
		<h3 class="headings text-white-pure xl:h3 xs:h5 pl-[12.5%] pr-[12.5%] pb-[20px]">Academic Calendar</h3>
		<p class="paragraph text-silver xl:p1 xs:p2 pb-[80px]  xl:w-[960px]">
			MSU-TCTO operates under a semestral basis. Find all the important dates you need here.
		</p>

		
	</div>
	
	<div class="item-center mt-[27px] pb-[79px]">
		<div class="item-center">
			
			{/* desktop view */}
			<div class="xl:grid xl:grid-cols-4 justify-center xs:hidden">
				{
					sixteenUpcomingEvents.map((calendar: {
						title: unknown;
						date: unknown;
						body: [
							{
								children: [
									{
										text: unknown;
									}
								]
							}
						];
						semester: {
							semester: unknown;
						};
						holiday: {
							holiday: unknown;
						};
					}) => {
						if (calendar.holiday.holiday === 'Academic Holiday') {
							return <div class="bg-gradient-blue-horizon p-5">
								<div class="gap-2 flex">
									<div>
										<p class="paragraph p1 text-white-pure">{ get3LettersMonth(calendar.date) }</p>
										<h3 class="headings h3">{ getDay(calendar.date) }</h3>
									</div>
									<div>
										<p class="paragraph p1 text-titanium mt-[5px]">{ calendar.title }</p>
										<p class="paragraph p2 text-titanium mt-[5px] max-h-[60px] overflow-hidden">
											{
												calendar.body[0].children[0].text
											}
										</p>
									</div>
								</div>
							</div>
						}else if (calendar.holiday.holiday === 'National Holiday') {
							return <div class="bg-gradient-maroon p-5">
								<div class="gap-2 flex">
									<div>
										<p class="paragraph p1 text-white-pure">{ get3LettersMonth(calendar.date) }</p>
										<h3 class="headings h3">{ getDay(calendar.date) }</h3>
									</div>
									<div>
										<p class="paragraph p1 text-titanium mt-[5px]">{ calendar.title }</p>
										<p class="paragraph p2 text-titanium mt-[5px] max-h-[60px] overflow-hidden">
											{
												calendar.body[0].children[0].text
											}
										</p>
									</div>
								</div>
							</div>
						}
					})
				}
			</div>
			{/* mobile view */}
			<div class="flex xs:flex-col xl:hidden xs:block">
				{
					threeUpcomingEvents.map((calendar: {
						title: unknown;
						date: unknown;
						body: [
							{
								children: [
									{
										text: unknown;
									}
								]
							}
						];
						semester: {
							semester: unknown;
						};
						holiday: {
							holiday: unknown;
						};
					}) => {
						if (calendar.holiday.holiday === 'Academic Holiday') {
							return <div class="bg-gradient-blue-horizon p-5">
								<div class="gap-5 flex">
									<div>
										<p class="paragraph p1 text-white-pure">{ get3LettersMonth(calendar.date) }</p>
										<h3 class="headings h3">{ getDay(calendar.date) }</h3>
									</div>
									<div>
										<p class="paragraph p1 text-titanium mt-[5px]">{ calendar.title }</p>
										<p class="paragraph p2 text-titanium mt-[5px] max-h-[60px] overflow-hidden">
											{
												calendar.body[0].children[0].text
											}	
										</p>
									</div>
								</div>
							</div>
						}else if (calendar.holiday.holiday === 'National Holiday') {
							return <div class="bg-gradient-maroon p-5">
								<div class="gap-5 flex">
									<div>
										<p class="paragraph p1 text-white-pure">{ get3LettersMonth(calendar.date) }</p>
										<h3 class="headings h3">{ getDay(calendar.date) }</h3>
									</div>
									<div>
										<p class="paragraph p1 text-titanium mt-[5px]">{ calendar.title }</p>
										<p class="paragraph p2 text-titanium mt-[5px] max-h-[60px] overflow-hidden">
											{
												calendar.body[0].children[0].text
											}	
										</p>
									</div>
								</div>
							</div>
						}
					})
				}
			</div>
		</div>
	</div>

</div>